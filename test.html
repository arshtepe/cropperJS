<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

<canvas id="canva" style="border: 1px solid #000000;">

</canvas>

<input type="file" id="fileAPI">

<input type="button" value="get crop" id="cropButton" />


<script >

    var file = document.getElementById( "fileAPI" ),
        img = new Image(),
        cButton = document.getElementById( "cropButton" );

    cButton.onclick = function () {
        document.body.appendChild( cropper.getSelectImage() );
    }

    file.addEventListener( "change", function ( e ) {

        var file = e.target.files [0];

        var reader = new FileReader ();
        console.log( img.complete );

        reader.onload = function () {

            console.log( file );
//            document.body.appendChild()
            img.onload = function () {
                console.log( img.width, img.height );
                var coeff = img.width / img.height;


                if ( coeff < 1 ) {
                    canvas.width = 650 * coeff;
                    canvas.height = 650;
                    ctx.drawImage( img, 0, 0, 650* coeff , 650  );
                    return;
                }


                canvas.width = 650;
                canvas.height = 650 / coeff;
                ctx.drawImage( img, 0, 0, 650, 650 / coeff );
            }

            img.src = reader.result;

        };

        reader.readAsDataURL( file );


    } );





</script>


</body>
</html>